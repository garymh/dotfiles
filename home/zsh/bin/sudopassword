#!/usr/bin/env ruby -rexpect

require 'pry'

@temp = nil

def pbcopy input
  str = input.to_s
  IO.popen('pbcopy', 'w') { |f| f << str }
  str
end

def pbpaste
  `pbpaste`
end

def save_clipboard
  puts "saving clipboard: #{pbpaste}"
  @temp = pbpaste
end

def restore_clipboard
  puts "restoring clipboard: #{@temp}"
  pbcopy(@temp)
end

def pass_from_1p
  save_clipboard
  pass = `osascript $HOME/iCloud/Internal/sudolikeaboss.scpt`.to_s.chomp
  restore_clipboard
  pass
  binding.pry
end

def sudolikeaboss
  STDOUT.puts pass_from_1p
end

sudolikeaboss
