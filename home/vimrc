" vim:fdm=marker
" ~/.vimrc
" thanks to the brilliant @tpope, @skwp, @nelstrom, @bling,
" @r00k, @spf13, @AndrewRadev, @junegunn, @wincent, and @sjl for unknowingly
" allowing me to borrow from their dotfiles.

call plug#begin()

" standard {{{ "
  Plug 'tpope/vim-unimpaired'
" }}} standard "

" almost standard {{{ "
  Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': 'yes \| ./install' }
  Plug 'junegunn/fzf.vim'
  Plug 'junegunn/vim-oblique'
  Plug 'mhinz/vim-sayonara', { 'on': 'Sayonara' }
  Plug 'milkypostman/vim-togglelist', { 'on': 'ToggleQuickfixList' }
  Plug 'takac/vim-commandcaps'
  Plug 'tpope/vim-commentary'
  Plug 'tpope/vim-repeat'
  Plug 'tpope/vim-sleuth'
  Plug 'tpope/vim-surround'
  Plug 'tpope/vim-ragtag'
" }}} almost standard "

" looks {{{ "
  Plug 'Xuyuanp/nerdtree-git-plugin'
  Plug 'Yggdroot/indentLine'
  Plug 'kien/rainbow_parentheses.vim'
  Plug 'junegunn/vim-peekaboo'
  Plug 'lilydjwg/colorizer', { 'for': ['css', 'sass', 'scss', 'less', 'html', 'javascript'] }
  Plug 'vim-airline/vim-airline' | Plug 'vim-airline/vim-airline-themes'
" }}} looks "

" colors {{{ "
  Plug 'w0ng/vim-hybrid'
  Plug 'Sclarki/neonwave.vim'
  Plug 'morhetz/gruvbox'
  Plug 'nanotech/jellybeans.vim'
  Plug 'freeo/vim-kalisi'
" }}} colors "

" ruby {{{ "
  Plug 'janko-m/vim-test'
  Plug 'ngmy/vim-rubocop',  { 'for': 'ruby' }
  Plug 'tpope/vim-bundler', { 'for': ['ruby', 'eruby', 'haml', 'slim'] }
  Plug 'tpope/vim-rails',   { 'for': ['ruby', 'eruby', 'haml', 'slim', 'yaml'] }
  Plug 'tpope/vim-rake',    { 'for': 'ruby' }
" }}} ruby "

" syntax {{{ "
  Plug 'sheerun/vim-polyglot'
  Plug 'davejlong/cf-utils.vim',   { 'for': ['coldfusion', 'cfml'] }
  Plug 'sunaku/vim-ruby-minitest', { 'for': 'ruby' }
  Plug 'xolox/vim-lua-ftplugin',   { 'for': 'lua' }
  Plug 'chrisbra/csv.vim',         { 'for': 'csv' }
" }}} syntax "

" dependencies {{{ "
  Plug 'xolox/vim-misc'
  Plug 'junegunn/vim-pseudocl'
" }}} dependencies "

" misc {{{ "
  Plug 'wincent/terminus'
  Plug 'AndrewRadev/splitjoin.vim'
  Plug 'AndrewRadev/switch.vim'
  Plug 'benekastah/neomake', { 'on': 'Neomake' }
  Plug 'chip/vim-fat-finger'
  Plug 'christoomey/vim-sort-motion'
  Plug 'christoomey/vim-system-copy'
  Plug 'christoomey/vim-tmux-navigator'
  Plug 'duggiefresh/vim-easydir'
  Plug 'dyng/ctrlsf.vim', { 'on': ['CtrlSF', 'CtrlSFToggle'] }
  Plug 'junegunn/vim-easy-align', { 'on': ['<Plug>(EasyAlign)', 'EasyAlign'] }
  Plug 'ntpeters/vim-better-whitespace'
  Plug 'scrooloose/nerdtree'
  Plug 'tpope/vim-abolish'
  Plug 'cohama/lexima.vim'
  Plug 'tpope/vim-eunuch'
  Plug 'tpope/vim-fugitive'
  Plug 'tpope/vim-projectionist'
  Plug 'tpope/vim-rsi'
  Plug 'vim-scripts/BufOnly.vim', { 'on': 'Bonly' }
  Plug 'foosoft/vim-argwrap'
" }}} misc "

" mac/nvim {{{ "
  if has('mac')
    Plug 'rizzatti/dash.vim',         { 'on': ['Dash', '<Plug>DashSearch', '<Plug>DashGlobalSearch'] }
    Plug 'zerowidth/vim-copy-as-rtf', { 'on': 'CopyRTF' }
    source ~/.vim/scripts/completions.vim
  endif
  if has('nvim')
    set termguicolors
  else
    Plug 'jszakmeister/vim-togglecursor'
    Plug 'tpope/vim-sensible'
  endif
" }}} mac/nvim "

" custom vim objects {{{ "
  Plug 'Julian/vim-textobj-brace'
  Plug 'beloglazov/vim-textobj-quotes'
  Plug 'coderifous/textobj-word-column.vim'
  Plug 'glts/vim-textobj-indblock'
  Plug 'kana/vim-textobj-entire'
  Plug 'kana/vim-textobj-fold'
  Plug 'kana/vim-textobj-indent'
  Plug 'kana/vim-textobj-user'
  Plug 'tek/vim-textobj-ruby'
  Plug 'kana/vim-textobj-line'
" }}} custom vim objects "

call plug#end()

source ~/.vim/scripts/autocommands.vim
source ~/.vim/scripts/mappings.vim
source ~/.vim/scripts/plugin_settings.vim

" settings {{{ "
  " set virtualedit=onemore  " allow selection past last character
  set expandtab
  set foldlevelstart=5
  set formatprg="par 79"    " respect the 80 character lines
  set gdefault              " assume the /g flag on :s substitutions
  set hidden                " make unsaved buffers hidden
  set ignorecase
  set listchars+=extends:»  " RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK (U+00BB, UTF-8: C2 BB)
  set listchars+=precedes:« " LEFT-POINTING DOUBLE ANGLE QUOTATION MARK (U+00AB, UTF-8: C2 AB)
  set listchars+=trail:•    " BULLET (U+2022, UTF-8: E2 80 A2)
  set nojoinspaces          " don't autoinsert two spaces after '.', '?', '!' for join command
  set noshowmatch           " don't jump between matching brackets
  set noswapfile
  set nowrap
  set number
  set relativenumber
  set shiftround            " indenting to nearest tabstop
  set smartcase             " smartcase for searching
  set splitbelow            " default split behavior
  set synmaxcol=180
  set ttimeoutlen=50        " vim-sensible's is kinda slow
  syntax sync minlines=256  " start highlighting from 256 lines backwards
" }}} settings "

" wildignore {{{ "
  set wildignore+=.DS_Store
  set wildignore+=*.jpg,*.jpeg,*.gif,*.png,*.psd,*.min.js,*.sock
  set wildignore+=*/.git/*,*/log/*,*/tmp/*,.keep
  set wildmode=list:longest
" }}} wildignore "

" coloring {{{ "
  set highlight+=@:ColorColumn          " ~/@ at end of window, 'showbreak'
  set highlight+=N:DiffText             " make current line number stand out a little
  set highlight+=c:LineNr               " blend vertical separators with line numbers
  set background=dark
  " let g:gruvbox_italic=1
  " let g:jellybeans_use_term_italics = 1
  colorscheme kalisi
  highlight OverLength ctermbg=red ctermfg=white guibg=#592929
  match OverLength /\%81v.\+/
" }}} coloring "

" Persistent Undo {{{
  silent !mkdir ~/.vim/backups > /dev/null 2>&1
  if has("persistent_undo")
    set undodir=~/.vim/backups
    set undofile
  endif
" }}}
