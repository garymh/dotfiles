export ZPLUG_HOME=$HOME/.zplug
local zplug_init=$ZPLUG_HOME/init.zsh
if [ ! -f "$zplug_init" ] &> /dev/null; then
    curl -fsSL https://raw.githubusercontent.com/zplug/installer/master/installer.zsh| zsh
fi
source $zplug_init

if [[ ! -f ~/.dircolors ]]; then
  curl -o ~/.dircolors https://raw.githubusercontent.com/trapd00r/LS_COLORS/master/LS_COLORS
fi

if [[ $IS_MAC -eq 1 ]]; then
  zplug plugins/heroku,         from:oh-my-zsh
  zplug plugins/chruby,         from:oh-my-zsh
  zplug plugins/docker,         from:oh-my-zsh
  zplug plugins/docker-compose, from:oh-my-zsh
  zplug plugins/github,         from:oh-my-zsh
  zplug plugins/yarn,           from:oh-my-zsh
  eval $(gdircolors -b $HOME/.dircolors)
else
  eval $(dircolors -b $HOME/.dircolors)
fi

zplug plugins/bundler,    from:oh-my-zsh
zplug plugins/autojump,   from:oh-my-zsh
zplug plugins/rake-fast,  from:oh-my-zsh
zplug plugins/zsh_reload, from:oh-my-zsh

zplug Tarrasch/zsh-colors
# zplug unixorn/git-extra-commands
zplug djui/alias-tips
zplug zsh-users/zsh-completions,        depth:1
zplug zdharma/fast-syntax-highlighting, defer:2
zplug hcgraf/zsh-sudo, as:plugin
zplug ael-code/zsh-colored-man-pages, as:plugin

if [[ $(zsh --version | awk '{print $2}') > 5.0.7 ]]; then
  zplug denysdovhan/spaceship-prompt, use:spaceship.zsh, from:github, as:theme
else
  zplug mafredri/zsh-async, from:github
  zplug sindresorhus/pure, use:pure.zsh, from:github, as:theme
fi

zplug "wting/autojump", \
      use:"bin/autojump", \
      as:command

zplug "wting/autojump", \
      use:"bin/autojump.zsh"

if ! zplug check --verbose; then
  printf "Install? [y/N]: "
  if read -q; then
    echo; zplug install
  fi
fi

zplug "lib/misc", from:oh-my-zsh
zplug "lib/key-bindings", from:oh-my-zsh
zplug "lib/history", from:oh-my-zsh
zplug "lib/directories", from:oh-my-zsh
zplug "lib/compfix", from:oh-my-zsh
zplug "lib/completion", from:oh-my-zsh

zplug 'zplug/zplug', hook-build:'zplug --self-manage'

zplug load

if [[ ! -d ~/.tmux/plugins/tpm ]]; then
  git clone https://github.com/tmux-plugins/tpm.git --depth 1 ~/.tmux/plugins/tpm 2> /dev/null
fi

for f ($HOME/.zsh/*.zsh) {source $f}

for f in ~/.zsh/private/*.zsh(N); do
  [ -e "$f" ] && source $f || break
done

SPACESHIP_PROMPT_ORDER=(
  time          # Time stampts section
  user          # Username section
  dir           # Current directory section
  host          # Hostname section
  ruby          # Ruby section
  exec_time     # Execution time
  line_sep      # Line break
  battery       # Battery level and status
  vi_mode       # Vi-mode indicator
  jobs          # Backgound jobs indicator
  exit_code     # Exit code section
  char          # Prompt character
)

SPACESHIP_RPROMPT_ORDER=(
  git           # Git section (git_branch + git_status)
)

export SPACESHIP_VI_MODE_SHOW="false"
export SPACESHIP_CHAR_SYMBOL="âžœ  "
export SPACESHIP_RUBY_COLOR="blue"
export SPACESHIP_RUBY_SYMBOL="ðŸ”» "
export SPACESHIP_PROMPT_SEPARATE_LINE="true"

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"
