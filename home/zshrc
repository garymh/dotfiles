DISABLE_AUTO_UPDATE="true"
source $DOTFILES/submodules/zgen/zgen.zsh

if ! zgen saved; then
  zgen oh-my-zsh

  if [[ $IS_MAC -eq 1 ]]; then
    zgen oh-my-zsh plugins/brew
    zgen oh-my-zsh plugins/heroku
  fi

  zgen oh-my-zsh plugins/bundler
  zgen oh-my-zsh plugins/fasd
  zgen oh-my-zsh plugins/github
  zgen oh-my-zsh plugins/rake-fast
  zgen oh-my-zsh plugins/zsh_reload
  zgen oh-my-zsh plugins/docker
  zgen oh-my-zsh plugins/docker-compose
  zgen oh-my-zsh plugins/yarn
  zgen oh-my-zsh plugins/chruby

  zgen load Tarrasch/zsh-colors
  zgen load djui/alias-tips
  zgen load zsh-users/zsh-syntax-highlighting
  zgen load mafredri/zsh-async
  zgen load zsh-users/zsh-completions src

  if [[ $(zsh --version | awk '{print $2}') > 5.3.0 ]]; then
    # zgen load dfurnes/purer
    zgen load denysdovhan/spaceship-prompt spaceship
  else
    zgen load sindresorhus/pure
  fi

  zgen save
fi

# source /usr/local/opt/chruby/share/chruby/chruby.sh
# source /usr/local/opt/chruby/share/chruby/auto.sh

e_header()  { echo -e "\n\033[1m$@\033[0m"; }
e_success() { echo -e " \033[1;32mâœ”\033[0m  $@"; }
e_error()   { echo -e " \033[1;31mâœ–\033[0m  $@"; }

for f ($HOME/.zsh/*.zsh) {source $f}

for f in ~/.zsh/private/*.zsh(N); do
  [ -e "$f" ] && source $f || break
done

ZGEN_RESET_ON_CHANGE=(${HOME}/.zshrc ${HOME}/.zshrc.local)

SPACESHIP_PROMPT_ORDER=(
  time          # Time stampts section
  user          # Username section
  dir           # Current directory section
  host          # Hostname section
  # git           # Git section (git_branch + git_status)
  ruby          # Ruby section
  exec_time     # Execution time
  line_sep      # Line break
  battery       # Battery level and status
  vi_mode       # Vi-mode indicator
  jobs          # Backgound jobs indicator
  exit_code     # Exit code section
  char          # Prompt character
)

SPACESHIP_RPROMPT_ORDER=(
  git           # Git section (git_branch + git_status)
)

export SPACESHIP_CHAR_SYMBOL="âžœ  "
export SPACESHIP_RUBY_COLOR="blue"
export SPACESHIP_RUBY_SYMBOL="ðŸ”» "
export SPACESHIP_PROMPT_SEPARATE_LINE="true"

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"
