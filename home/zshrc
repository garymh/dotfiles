if _macos; then
  zplug "plugins/heroku",         from:oh-my-zsh
  zplug "plugins/chruby",         from:oh-my-zsh
  zplug "plugins/docker",         from:oh-my-zsh
  zplug "plugins/docker-compose", from:oh-my-zsh
  zplug "plugins/github",         from:oh-my-zsh
  zplug "plugins/yarn",           from:oh-my-zsh
  zplug "plugins/tmux",           from:oh-my-zsh
  export ZSH_TMUX_AUTOSTART="true"
  export ZSH_TMUX_FIXTERM="false"
  export ZSH_TMUX_FIXTERM_WITH_256COLOR="tmux-256color"
else
  zplug "plugins/rvm",            from:oh-my-zsh
fi

zplug "plugins/bundler",                  from:oh-my-zsh
zplug "plugins/zsh_reload",               from:oh-my-zsh
zplug 'ytet5uy4/fzf-widgets'
zplug "Tarrasch/zsh-colors",              as:plugin
zplug "MichaelAquilina/zsh-you-should-use"
zplug "zsh-users/zsh-completions",        depth:1
zplug "zdharma/fast-syntax-highlighting", defer:2
zplug "ael-code/zsh-colored-man-pages",   as:plugin
zplug "zsh-users/zsh-autosuggestions",    as:plugin
export ZSH_AUTOSUGGEST_USE_ASYNC="true"
export ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg=239"
zplug "unixorn/git-extra-commands",       from:github
zplug "lib/misc",                         from:oh-my-zsh
zplug "lib/key-bindings",                 from:oh-my-zsh
zplug "lib/history",                      from:oh-my-zsh
zplug "lib/directories",                  from:oh-my-zsh
zplug "lib/compfix",                      from:oh-my-zsh
zplug "lib/completion",                   from:oh-my-zsh

if [[ $(zsh --version | awk '{print $2}') > 5.0.7 ]]; then
  zplug "denysdovhan/spaceship-prompt", use:spaceship.zsh, from:github, as:theme
  zplug "hlissner/zsh-autopair",        defer:2
else
  zplug "mafredri/zsh-async",           from:github
  zplug "sindresorhus/pure",            use:pure.zsh, from:github, as:theme
fi

zplug 'zplug/zplug', hook-build:'zplug --self-manage'

if ! zplug check --verbose; then
  printf "Install? [y/N]: "
  if read -q; then
    echo; zplug install
  fi
fi

zplug load

if [[ ! -d ~/.tmux/plugins/tpm ]]; then
  git clone https://github.com/tmux-plugins/tpm.git --depth 1 ~/.tmux/plugins/tpm 2> /dev/null
fi

for f ($HOME/.zsh/*.zsh) { source $f }

for f in ~/.zsh/private/*.zsh(N); do
  [ -e "$f" ] && source $f || break
done

test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

set -o monitor
